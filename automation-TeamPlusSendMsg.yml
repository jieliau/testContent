args:
- name: baseURL
- name: account
  required: true
  secret: true
- name: apiKey
  required: true
  secret: true
- name: chatSN
  required: true
  secret: true
- name: msg
commonfields:
  id: 2a02bd21-17de-45b8-8f7d-eb7d773028f9
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: ""
    itemVersion: ""
    packID: ""
    packName: ""
    propagationLabels:
    - all
    toServerVersion: ""
dockerimage: demisto/python3:3.10.4.31492
enabled: true
engineinfo: {}
mainengineinfo: {}
name: TeamPlusSendMsg
pswd: ""
runas: DBotWeakRole
runonce: false
script: |-
  import requests

  # Disable insecure warnings
  requests.packages.urllib3.disable_warnings()

  # Get the arguments
  args = demisto.args()

  # Get the full URL
  url = args['baseURL'] + '/xxxxxx/API/IMService.ashx?ask=sendChatMessage&' + \
          '&account=' + args['account'] + \
          '&api_key=' + args['apiKey'] + \
          '&chat_sn=' + args['chatSN'] + \
          '&msg_content=' + args['msg'] + \
          '&content_type=1&file_show_name='

  res = requests.get(url, verify = False)
  resjosn = res.json()
  ec = {'TeamPlus.': resjson}

  if resjson['IsSuccess']:
      demisto.results({
          'Contents': resjson,
          'HumanReadable': tableToMarkdown('TeamPlus Send Message Result', resjson),
          'EntryContext': ec
      })
  else:
      return_error('Message is unable to be delivered. Reason:' + resjson['Description'])
scripttarget: 0
subtype: python3
tags: []
type: python
